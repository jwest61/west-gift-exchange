<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üéÅ Christmas Gift Exchange</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: #f8fff8;
    color: #333;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    background-color: #2e8b57;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    margin-top: 20px;
  }

  .container {
    display: flex;
    gap: 40px;
    width: 90%;
    margin: 20px auto;
  }

  .pairings {
    width: 220px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }

  th {
    background-color: #3cb371;
    color: white;
    padding: 6px;
    text-align: left;
  }

  td {
    padding: 5px;
    border-bottom: 1px solid #ccc;
  }

  .tabs {
    flex-grow: 1;
    text-align: center;
  }

  .tab-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 15px;
    gap: 8px;
  }

  .tab-buttons button {
    padding: 8px 14px;
    border: none;
    background-color: #3cb371;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }

  .tab-buttons button.active {
    background-color: #2e8b57;
  }

  .tab-content {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .gift-list {
    margin-top: 15px;
  }

  .gift-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #eafaea;
    padding: 8px 10px;
    border-radius: 6px;
    margin-bottom: 5px;
  }

  .gift-item button {
    background: #d9534f;
    color: white;
    border: none;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
  }

  input, select {
    margin: 4px;
    padding: 6px;
    border: 1px solid #aaa;
    border-radius: 4px;
  }

  button.add-btn {
    background-color: #2e8b57;
    color: white;
    border: none;
    padding: 7px 12px;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>üéÑ Family Gift Exchange üéÅ</h1>

<div class="container">

  <!-- LEFT SIDE: Pairings -->
  <div class="pairings">
    <h3>Adults</h3>
    <table>
      <tr><th>Giver</th><th>Receiver</th></tr>
      <tr><td>Jon</td><td>Katie</td></tr>
      <tr><td>Dave</td><td>Jason</td></tr>
      <tr><td>Karen</td><td>Chelsea</td></tr>
      <tr><td>Jen</td><td>Stef</td></tr>
      <tr><td>Dan</td><td>Jon</td></tr>
      <tr><td>Jason</td><td>Dave</td></tr>
      <tr><td>Stef</td><td>Geoff</td></tr>
      <tr><td>Katie</td><td>Dan</td></tr>
      <tr><td>Chelsea</td><td>Jen</td></tr>
      <tr><td>Geoff</td><td>Karen</td></tr>
    </table>

    <h3>Kids</h3>
    <table>
      <tr><th>Giver</th><th>Receiver</th></tr>
      <tr><td>Eddie</td><td>Gwen</td></tr>
      <tr><td>Gwen</td><td>Evie</td></tr>
      <tr><td>Evie</td><td>Claire</td></tr>
      <tr><td>Claire</td><td>Eddie</td></tr>
      <tr><td>Main</td><td>Theo</td></tr>
      <tr><td>Theo</td><td>Elora</td></tr>
      <tr><td>Elora</td><td>Main</td></tr>
      <tr><td>Eden</td><td>Nora</td></tr>
      <tr><td>Nora</td><td>Eden</td></tr>
    </table>
  </div>

  <!-- RIGHT SIDE: Tabs -->
  <div class="tabs">
    <div class="tab-buttons" id="tabButtons"></div>
    <div class="tab-content" id="tabContent">
      <p>Select a giver to view or add gifts.</p>
    </div>
  </div>
</div>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbw7ouiHoNqOHdM6IJsQrynNkyjkHg-2owdKmpyCAcoyyfd6Aspr3k9w6AiBZPsCslN38w/exec";
const givers = ["Jon","Dave","Karen","Jen","Dan","Jason","Stef","Katie","Chelsea","Geoff","Eddie","Gwen","Evie","Claire","Main","Theo","Elora","Eden","Nora"];
let currentGiver = null;
let allGifts = [];

async function fetchGifts() {
  const res = await fetch(SHEET_URL);
  allGifts = await res.json();
}

function renderTabs() {
  const container = document.getElementById("tabButtons");
  container.innerHTML = "";
  givers.forEach(giver => {
    const btn = document.createElement("button");
    btn.textContent = giver;
    btn.onclick = () => openTab(giver, btn);
    container.appendChild(btn);
  });
}

function openTab(giver, btn) {
  currentGiver = giver;
  document.querySelectorAll(".tab-buttons button").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
  renderGiftForm();
}

function renderGiftForm() {
  const tabContent = document.getElementById("tabContent");
  const gifts = allGifts.filter(g => g.Giver === currentGiver);
  tabContent.innerHTML = `
    <h2>${currentGiver}'s Gift Ideas</h2>
    <div>
      <input id="giftName" placeholder="Gift name" />
      <select id="priority">
        <option value="High">High</option>
        <option value="Medium">Medium</option>
        <option value="Low">Low</option>
      </select>
      <input id="price" placeholder="Price $" type="number" min="0"/>
      <button class="add-btn" onclick="addGift()">Add Gift</button>
    </div>
    <div class="gift-list" id="giftList"></div>
  `;
  renderGiftList(gifts);
}

function renderGiftList(gifts) {
  const list = document.getElementById("giftList");
  list.innerHTML = "";
  gifts.forEach(g => {
    const item = document.createElement("div");
    item.className = "gift-item";
    item.innerHTML = `
      <span>${g["Gift Name"]} ‚Äî ${g.Priority} ‚Äî $${g.Price}</span>
      <button onclick="deleteGift('${g["Gift Name"]}')">Remove</button>
    `;
    list.appendChild(item);
  });
}

async function addGift() {
  const name = document.getElementById("giftName").value.trim();
  const priority = document.getElementById("priority").value;
  const price = document.getElementById("price").value.trim();

  if (!name) return alert("Enter a gift name!");

  const gift = { action: "add", Giver: currentGiver, "Gift Name": name, Priority: priority, Price: price };
  await fetch(SHEET_URL, { method: "POST", body: JSON.stringify(gift) });
  await fetchGifts();
  renderGiftForm();
}

async function deleteGift(name) {
  const payload = { action: "delete", Giver: currentGiver, "Gift Name": name };
  await fetch(SHEET_URL, { method: "POST", body: JSON.stringify(payload) });
  await fetchGifts();
  renderGiftForm();
}

(async () => {
  await fetchGifts();
  renderTabs();
})();
</script>

</body>
</html>




