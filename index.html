<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Christmas Gift Exchange üéÑ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8fff8;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #1b5e20;
    }
    table {
      width: 100%;
      max-width: 700px;
      margin: 10px auto 40px auto;
      border-collapse: collapse;
      background: #e8f5e9;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      border: 1px solid #c8e6c9;
      padding: 6px 10px;
      text-align: left;
    }
    th {
      background: #81c784;
      color: white;
    }
    .tab-container {
      text-align: center;
      margin-bottom: 20px;
    }
    .tab {
      display: inline-block;
      margin: 5px;
      padding: 10px 15px;
      border-radius: 20px;
      background: #a5d6a7;
      cursor: pointer;
      transition: 0.2s;
    }
    .tab:hover {
      background: #81c784;
    }
    .active-tab {
      background: #4caf50;
      color: white;
    }
    .gift-form {
      text-align: center;
      margin-top: 20px;
      display: none;
    }
    input, textarea {
      margin: 5px;
      padding: 8px;
      width: 240px;
    }
    textarea {
      width: 90%;
      max-width: 600px;
      height: 60px;
    }
    button {
      margin: 5px;
      padding: 8px 15px;
      background: #4caf50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #388e3c;
    }
    .gift-list {
      margin-top: 20px;
      text-align: left;
      display: inline-block;
      width: 90%;
      max-width: 600px;
    }
    .gift-item {
      background: #e0f2f1;
      margin: 5px 0;
      padding: 8px;
      border-radius: 8px;
    }
    .remove-btn {
      background: #e53935;
      margin-left: 10px;
    }
  </style>
</head>
<body>

  <h1>üéÅ Christmas Gift Exchange</h1>

  <h2 style="text-align:center; color:#2e7d32;">Group 1 ‚Äì Adults</h2>
  <table>
    <tr><th>Giver</th><th>Receiver</th></tr>
    <tr><td>Jon</td><td>Katie</td></tr>
    <tr><td>Dave</td><td>Jason</td></tr>
    <tr><td>Karen</td><td>Chelsea</td></tr>
    <tr><td>Jen</td><td>Stef</td></tr>
    <tr><td>Dan</td><td>Jon</td></tr>
    <tr><td>Jason</td><td>Dave</td></tr>
    <tr><td>Stef</td><td>Geoff</td></tr>
    <tr><td>Katie</td><td>Dan</td></tr>
    <tr><td>Chelsea</td><td>Jen</td></tr>
    <tr><td>Geoff</td><td>Karen</td></tr>
  </table>

  <h2 style="text-align:center; color:#2e7d32;">Group 2 ‚Äì Kids</h2>
  <table>
    <tr><th>Giver</th><th>Receiver</th></tr>
    <tr><td>Eddie</td><td>Gwen</td></tr>
    <tr><td>Gwen</td><td>Evie</td></tr>
    <tr><td>Evie</td><td>Claire</td></tr>
    <tr><td>Claire</td><td>Eddie</td></tr>
    <tr><td>Main</td><td>Theo</td></tr>
    <tr><td>Theo</td><td>Elora</td></tr>
    <tr><td>Elora</td><td>Main</td></tr>
    <tr><td>Eden</td><td>Nora</td></tr>
    <tr><td>Nora</td><td>Eden</td></tr>
  </table>

  <div class="tab-container">
    <h3>Adults</h3>
    <div class="tab" onclick="showTab('Jon')">Jon</div>
    <div class="tab" onclick="showTab('Dave')">Dave</div>
    <div class="tab" onclick="showTab('Karen')">Karen</div>
    <div class="tab" onclick="showTab('Jen')">Jen</div>
    <div class="tab" onclick="showTab('Dan')">Dan</div>
    <div class="tab" onclick="showTab('Jason')">Jason</div>
    <div class="tab" onclick="showTab('Stef')">Stef</div>
    <div class="tab" onclick="showTab('Katie')">Katie</div>
    <div class="tab" onclick="showTab('Chelsea')">Chelsea</div>
    <div class="tab" onclick="showTab('Geoff')">Geoff</div>

    <h3>Kids</h3>
    <div class="tab" onclick="showTab('Eddie')">Eddie</div>
    <div class="tab" onclick="showTab('Gwen')">Gwen</div>
    <div class="tab" onclick="showTab('Evie')">Evie</div>
    <div class="tab" onclick="showTab('Claire')">Claire</div>
    <div class="tab" onclick="showTab('Main')">Main</div>
    <div class="tab" onclick="showTab('Theo')">Theo</div>
    <div class="tab" onclick="showTab('Elora')">Elora</div>
    <div class="tab" onclick="showTab('Eden')">Eden</div>
    <div class="tab" onclick="showTab('Nora')">Nora</div>
  </div>

  <div class="gift-form" id="giftForm">
    <h3 id="currentPerson"></h3>

    <input id="giftName" placeholder="Gift Name" />
    <input id="giftPriority" placeholder="Priority (1‚Äì3)" />
    <input id="giftPrice" placeholder="Price Estimate" />
    <input id="giftURL" placeholder="Product URL" />
    <input id="giftNotes" placeholder="Notes" />
    <br>
    <button onclick="addGift()">Add Gift</button>

    <div class="gift-list" id="giftList"></div>

    <h4>Stocking Ideas</h4>
    <textarea id="stockingIdeas" placeholder="Enter stocking ideas..."></textarea><br>
    <button onclick="saveStockingIdeas()">Save Stocking Ideas</button>
  </div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbw7ouiHoNqOHdM6IJsQrynNkyjkHg-2owdKmpyCAcoyyfd6Aspr3k9w6AiBZPsCslN38w/exec";
    let currentPerson = "";
    let gifts = {};

    function showTab(person) {
      currentPerson = person;
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active-tab"));
      event.target.classList.add("active-tab");
      document.getElementById("giftForm").style.display = "block";
      document.getElementById("currentPerson").textContent = `üéÅ ${person}'s Gift List`;
      loadGifts(person);
      loadStockingIdeas(person);
    }

    function addGift() {
      const gift = {
        person: currentPerson,
        name: document.getElementById("giftName").value,
        priority: document.getElementById("giftPriority").value,
        price: document.getElementById("giftPrice").value,
        url: document.getElementById("giftURL").value,
        notes: document.getElementById("giftNotes").value
      };

      if (!gift.name) return alert("Please enter a gift name!");

      fetch(scriptURL, {
        method: "POST",
        body: new URLSearchParams({ action: "addGift", ...gift })
      });

      if (!gifts[currentPerson]) gifts[currentPerson] = [];
      gifts[currentPerson].push(gift);
      renderGiftList();
      document.querySelectorAll("#giftName,#giftPriority,#giftPrice,#giftURL,#giftNotes").forEach(i => i.value = "");
    }

    function removeGift(index) {
      gifts[currentPerson].splice(index, 1);
      renderGiftList();
      fetch(scriptURL, {
        method: "POST",
        body: new URLSearchParams({ action: "removeGift", person: currentPerson, index })
      });
    }

    function renderGiftList() {
      const list = document.getElementById("giftList");
      list.innerHTML = "";
      (gifts[currentPerson] || []).forEach((g, i) => {
        const div = document.createElement("div");
        div.className = "gift-item";
        div.innerHTML = `<strong>${g.name}</strong> 
          (Priority: ${g.priority || "‚Äì"}, $${g.price || "?"})<br>
          ${g.url ? `<a href="${g.url}" target="_blank">${g.url}</a><br>` : ""}
          ${g.notes ? `<em>${g.notes}</em><br>` : ""}
          <button class='remove-btn' onclick='removeGift(${i})'>Remove</button>`;
        list.appendChild(div);
      });
    }

    function saveStockingIdeas() {
      const text = document.getElementById("stockingIdeas").value;
      fetch(scriptURL, {
        method: "POST",
        body: new URLSearchParams({ 
          action: "saveStockingIdeas",
          person: currentPerson,
          text
        })
      });
      alert("Stocking ideas saved!");
    }

    function loadGifts(person) {
      fetch(scriptURL + "?action=getGifts&person=" + person)
        .then(res => res.json())
        .then(data => {
          gifts[person] = data || [];
          renderGiftList();
        });
    }

    function loadStockingIdeas(person) {
      fetch(scriptURL + "?action=getStockingIdeas&person=" + person)
        .then(res => res.text())
        .then(data => {
          document.getElementById("stockingIdeas").value = data || "";
        });
    }
  </script>
</body>
</html>






